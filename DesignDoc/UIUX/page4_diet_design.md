# 饮食记录页（Screen 4）设计

## 页面概述
饮食记录页面是用户记录和管理日常饮食摄入的核心界面，提供快速热量录入、食物搜索和摄入列表管理功能。页面采用卡片式布局，强调操作便捷性，帮助用户高效完成饮食记录。

## 卡片布局

### 1. 顶部Dashboard卡片（收起状态）
- **高度**：64dp
- **宽度**：全屏宽
- **背景色**：主色调（#1E88E5）
- **内容**：同其他页面的顶部Dashboard卡片
- **交互**：点击任意位置返回Dashboard首页

### 2. 今日热量摘要卡片
- **尺寸**：高度140dp，宽度为屏幕宽度减去左右边距（24dp）
- **位置**：顶部Dashboard卡片下方16dp
- **背景色**：白色（#FFFFFF）
- **内容布局**：
  - 顶部：标题"今日热量"（16sp，黑色，Roboto Medium）+ 日期（14sp，灰色，Roboto Regular）
  - 中部：大型热量计数器
    - 摄入热量（24sp，蓝色#1E88E5，Roboto Bold）
    - 消耗热量（24sp，绿色#43A047，Roboto Bold）
    - 剩余热量（36sp，盈余为红色#E53935，赤字为绿色#43A047，Roboto Bold）
  - 底部：水平进度条
    - 已摄入部分（蓝色#1E88E5）
    - 目标线（垂直虚线）
    - 总宽度代表每日目标热量
- **交互**：
  - 点击卡片：展开显示更详细的营养素分布（蛋白质/脂肪/碳水）
  - 长按卡片：弹出每日目标设置弹框

### 3. 快速录入卡片
- **尺寸**：高度100dp，宽度为屏幕宽度减去左右边距（24dp）
- **位置**：今日热量摘要卡片下方12dp
- **背景色**：白色（#FFFFFF）
- **内容布局**：
  - 标题"快速添加"（16sp，黑色，Roboto Medium）
  - 两行快速添加按钮：
    - 第一行：+100 kcal、+250 kcal、+500 kcal按钮
    - 第二行：常见食物快捷按钮（水、咖啡、鸡胸肉、鸡蛋等）
  - 每个按钮：
    - 圆角矩形（高度40dp，宽度根据内容自适应）
    - 文字（14sp，白色，Roboto Medium）
    - 背景色：主色调（#1E88E5）的不同深浅
- **交互**：
  - 点击热量按钮：直接添加对应热量到今日摄入
  - 点击食物按钮：添加预设热量的对应食物
  - 添加成功：显示轻量级成功提示，热量摘要更新

### 4. 食物搜索卡片
- **尺寸**：高度80dp（展开后高度增加），宽度为屏幕宽度减去左右边距（24dp）
- **位置**：快速录入卡片下方12dp
- **背景色**：白色（#FFFFFF）
- **内容布局**：
  - 搜索框（高度48dp）：
    - 左侧：搜索图标
    - 中间：输入提示"搜索食物..."（14sp，浅灰色，Roboto Regular）
    - 右侧：扫码图标按钮
  - 展开后显示：
    - 搜索结果列表
    - 每个结果项（高度60dp）：
      - 左侧：食物图标或默认图标
      - 中间：食物名称（16sp，黑色，Roboto Medium）+ 单位量（14sp，灰色，Roboto Regular）
      - 右侧：热量值（16sp，主色调，Roboto Medium）+ "添加"按钮
- **交互**：
  - 点击搜索框：展开卡片，显示虚拟键盘
  - 输入搜索词：实时显示匹配结果
  - 点击食物"添加"按钮：弹出数量选择器
  - 点击扫码图标：启动相机扫描食品条形码

### 5. 今日摄入列表卡片
- **尺寸**：高度自适应（最多显示6项），宽度为屏幕宽度减去左右边距（24dp）
- **位置**：食物搜索卡片下方12dp
- **背景色**：白色（#FFFFFF）
- **内容布局**：
  - 顶部：标题"今日摄入"（16sp，黑色，Roboto Medium）+ "清空"文字按钮（14sp，红色#E53935）
  - 食物列表：
    - 每项（高度72dp）：
      - 左侧：食物图标或默认图标
      - 中间：
        - 食物名称（16sp，黑色，Roboto Medium）
        - 数量和单位（14sp，灰色，Roboto Regular）
        - 添加时间（12sp，浅灰色，Roboto Regular）
      - 右侧：
        - 热量值（16sp，主色调，Roboto Medium）
        - 编辑图标按钮
  - 底部：总计栏
    - "总计"文字（14sp，黑色，Roboto Medium）
    - 总热量值（18sp，主色调，Roboto Bold）
- **交互**：
  - 左滑食物项：显示删除按钮
  - 点击编辑图标：弹出食物编辑弹框
  - 长按食物项：启用拖动排序
  - 点击"清空"：弹出确认对话框，确认后清空今日记录

### 6. 饮食历史卡片
- **尺寸**：高度自适应（最多显示3天），宽度为屏幕宽度减去左右边距（24dp）
- **位置**：今日摄入列表卡片下方12dp
- **背景色**：白色（#FFFFFF）
- **内容布局**：
  - 顶部：标题"饮食历史"（16sp，黑色，Roboto Medium）+ "查看全部"文字按钮（14sp，主色调）
  - 历史记录（按日期分组）：
    - 日期标题（14sp，灰色，Roboto Medium）+ 当日总热量（14sp，主色调，Roboto Medium）
    - 食物列表（简化版，每项高度48dp）：
      - 左侧：食物名称（14sp，黑色，Roboto Regular）
      - 右侧：热量值（14sp，灰色，Roboto Regular）
- **交互**：
  - 点击"查看全部"：打开完整饮食历史记录页面
  - 点击日期标题：展开/收起该日详情
  - 点击历史食物项：显示该食物的详细信息

### 7. 浮动操作按钮（FAB）
- **尺寸**：56dp x 56dp
- **位置**：右下角，距底部导航栏16dp，距右边缘16dp
- **背景色**：主色调（#1E88E5）
- **图标**：白色加号（+）
- **交互**：点击打开食物添加底部抽屉

## 页面交互流程

### 1. 食物添加流程
- **通过快速录入卡片**：
  - 点击热量按钮：直接添加对应热量到今日摄入
    - 系统自动创建名为"快速添加 XXX kcal"的记录
    - 热量摘要立即更新
  - 点击食物快捷按钮：添加预设食物
    - 弹出数量选择器（默认为1份）
    - 确认后添加到今日摄入列表
    
- **通过搜索添加**：
  - 在搜索框输入关键词
  - 从结果列表选择食物
  - 弹出数量选择器：
    - 数量调节器（+/-按钮）
    - 单位选择（克/份/个等）
    - 确认/取消按钮
  - 确认后添加到今日摄入列表
  
- **通过FAB添加**：
  - 点击FAB：打开食物添加底部抽屉
  - 底部抽屉包含：
    - 搜索框
    - 食物分类标签（主食/蛋白质/蔬果等）
    - 常见食物网格列表
    - "自定义食物"按钮
  - 选择食物后：弹出数量选择器
  - 点击"自定义食物"：打开自定义食物创建表单

### 2. 食物编辑流程
- 点击食物项的编辑图标：
  - 弹出食物编辑弹框
  - 弹框包含：
    - 食物名称（可编辑）
    - 数量调节器
    - 单位选择
    - 热量值（可编辑）
    - 确认/取消按钮
  - 确认后更新食物信息和热量摘要

### 3. 食物删除流程
- 左滑食物项：
  - 显示删除按钮（红色背景）
  - 点击删除按钮：直接移除该食物
  - 热量摘要立即更新
- 或通过编辑弹框底部的"删除"按钮删除

### 4. 饮食历史查看流程
- 点击"查看全部"：
  - 打开饮食历史记录页面（全屏）
  - 显示日历视图和列表视图切换选项
- 日历视图：
  - 月历格式，日期下方显示当日总热量
  - 点击日期：显示该日详细食物列表
- 列表视图：
  - 按日期倒序排列饮食记录
  - 支持按食物名称或热量范围筛选

## 特殊交互功能

### 1. 条形码扫描
- 点击搜索框右侧扫码图标：
  - 启动相机界面
  - 显示扫描框和引导提示
  - 扫描成功：
    - 显示识别到的食物信息
    - 提供确认/修改选项
  - 扫描失败：
    - 提示手动搜索
    - 或提供添加新食物选项

### 2. 自定义食物创建
- 点击"自定义食物"按钮：
  - 打开自定义食物创建表单
  - 表单包含：
    - 食物名称输入
    - 单位选择
    - 热量值输入
    - 可选的营养素详情（蛋白质/脂肪/碳水）
    - 保存/取消按钮
  - 保存后：
    - 添加到自定义食物库
    - 显示在搜索结果中

### 3. 热量目标设置
- 长按今日热量摘要卡片：
  - 弹出热量目标设置弹框
  - 弹框包含：
    - 每日目标热量输入
    - 营养素比例调节（蛋白质/脂肪/碳水）
    - 确认/取消按钮
  - 确认后更新热量目标和进度条

## 响应式调整
- **小屏幕设备**（<5英寸）：
  - 快速录入按钮每行显示3个
  - 今日摄入列表默认显示4项
  
- **大屏幕设备**（>6英寸）：
  - 快速录入按钮每行显示5个
  - 今日摄入列表默认显示8项

## 状态与反馈
- **添加成功**：食物项添加时显示短暂的绿色成功提示
- **超出目标**：热量超过每日目标时，剩余热量数字变红并显示警告图标
- **空状态**：首次使用时，显示引导提示和示例食物
- **加载状态**：搜索时显示加载动画
